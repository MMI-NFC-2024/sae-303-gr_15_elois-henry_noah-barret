---
import Layout from "../layouts/Layout.astro";
import CarteGares from "../components/cartes/CarteGare.astro";
import CarteAccessibilite from "../components/cartes/CarteAccessibilite.astro";
import CarteTourisme from "../components/cartes/CarteTourisme.astro";
---

<Layout>
  <main
    class="max-w-7xl mx-auto px-6 py-16 bg-gradient-to-b from-[#f8f5f0] to-[#f3f1ec] min-h-screen"
  >
    <h1 class="text-5xl font-extrabold text-center mb-4 text-[#1a1a1a]">
      La réalité du réseau ferroviaire français
    </h1>

    <p class="text-center text-lg text-[#3d3d3d] max-w-3xl mx-auto mb-12">
      Explorez à travers trois cartes interactives l’état du réseau ferroviaire,
      son accessibilité en transports en commun, et sa proximité avec les lieux
      culturels.
    </p>

    <section
      class="relative overflow-hidden rounded-3xl shadow-xl bg-[#fdfcfb] border border-[#e2dfda]"
    >
      <div
        id="slider"
        class="flex transition-transform duration-700 ease-in-out"
      >
        <div
          class="min-w-full flex-shrink-0 flex flex-col items-center justify-center p-8"
        >
          <CarteGares />
        </div>

        <div
          class="min-w-full flex-shrink-0 flex flex-col items-center justify-center p-8"
        >
          <CarteAccessibilite />
        </div>

        <div
          class="min-w-full flex-shrink-0 flex flex-col items-center justify-center p-8"
        >
          <CarteTourisme />
        </div>
      </div>

      <button
        id="prev"
        class="absolute top-1/2 left-6 -translate-y-1/2 bg-[#f5e8d7] text-[#1a1a1a] p-3 rounded-full shadow-md hover:bg-[#e8dcc9] transition flex items-center justify-center"
        aria-label="Carte précédente"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="w-5 h-5"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M15 19l-7-7 7-7"></path>
        </svg>
      </button>

      <button
        id="next"
        class="absolute top-1/2 right-6 -translate-y-1/2 bg-[#f5e8d7] text-[#1a1a1a] p-3 rounded-full shadow-md hover:bg-[#e8dcc9] transition flex items-center justify-center"
        aria-label="Carte suivante"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="w-5 h-5"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M9 5l7 7-7 7"></path>
        </svg>
      </button>

      <div class="absolute bottom-5 left-1/2 -translate-x-1/2 flex gap-3">
        <div
          class="dot w-3 h-3 rounded-full bg-[#d4d1cc] transition-all duration-300"
        >
        </div>
        <div
          class="dot w-3 h-3 rounded-full bg-[#d4d1cc] transition-all duration-300"
        >
        </div>
        <div
          class="dot w-3 h-3 rounded-full bg-[#d4d1cc] transition-all duration-300"
        >
        </div>
      </div>
    </section>

    <div class="text-center mt-12 text-sm text-[#5a5a5a] italic">
      © 2025 — Le Pari du Train · Un projet MMI Montbéliard
    </div>
  </main>

  <script client:load>
    const slider = document.getElementById("slider");
    const dots = document.querySelectorAll(".dot");
    const prev = document.getElementById("prev");
    const next = document.getElementById("next");

    let index = 0;

    function updateSlide() {
      slider.style.transform = `translateX(-${index * 100}%)`;
      dots.forEach((dot, i) => {
        dot.classList.toggle("bg-[#1a1a1a]", i === index);
        dot.classList.toggle("scale-125", i === index);
        dot.classList.toggle("bg-[#d4d1cc]", i !== index);
      });
    }

    prev.addEventListener("click", () => {
      index = (index - 1 + 3) % 3;
      updateSlide();
    });

    next.addEventListener("click", () => {
      index = (index + 1) % 3;
      updateSlide();
    });

    updateSlide();
  </script>
</Layout>
